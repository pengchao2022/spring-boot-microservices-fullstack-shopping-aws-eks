server:
  port: 8082

spring:
  application:
    name: order-service
  datasource:
    url: jdbc:postgresql://postgresql-service:5432/ecommerce_orders
    username: admin
    password: ${POSTGRES_PASSWORD}
    driver-class-name: org.postgresql.Driver
    hikari:
      auto-commit: true
      read-only: false
      transaction-isolation: TRANSACTION_READ_COMMITTED
      connection-timeout: 30000
      maximum-pool-size: 10
      minimum-idle: 5
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        jdbc:
          lob:
            non_contextual_creation: true
        connection:
          provider_disables_autocommit: false
        transaction:
          jta:
            platform: org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform
  rabbitmq:
    host: ${RABBITMQ_HOST:rabbitmq-service}
    port: ${RABBITMQ_PORT:5672}
    username: ${RABBITMQ_USERNAME:guest}
    password: ${RABBITMQ_PASSWORD:guest}

feign:
  client:
    config:
      default:
        connectTimeout: 5000
        readTimeout: 5000

logging:
  level:
    com.ecommerce.order: DEBUG
    org.springframework.transaction: TRACE
    org.hibernate.engine.transaction.internal: DEBUG
    org.hibernate.resource.transaction: DEBUG
    com.zaxxer.hikari: DEBUG

app:
  payment-service:
    url: http://payment-service:80
  inventory-service:
    url: http://inventory-service:8080
  inventory:
    check-enabled: false
    reservation-enabled: false
    validation-enabled: false
    base-url: http://inventory-service:8080
    timeout-ms: 5000
    fallback-enabled: true

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always